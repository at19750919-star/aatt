<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <!-- =================================================================== -->
    <!-- === 1. é é¢åŸºæœ¬è¨­å®š (Meta & Title) === -->
    <!-- =================================================================== -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç´…è‰²0é»ç‰Œè¨Šè™Ÿæ¸¬è©¦</title>

    <!-- =================================================================== -->
    <!-- === 2. CSS æ¨£å¼å€ (Styling) === -->
    <!-- =================================================================== -->
    <style>
       /* =========================================================
   â‘  è¨ˆç®—å·¥å…·æ‡¸æµ®è¦–çª—ï¼ˆæ•´å€‹æµ®çª—èˆ‡å­å…ƒç´ åˆ†å±¤ï¼‰
   ---------------------------------------------------------
   .floating-widget       æµ®çª—å¤–æ¡†èˆ‡ä½ç½®å°ºå¯¸
   .widget-content        å…§éƒ¨å®¹å™¨ï¼šç›´å‘æ’åˆ—
   .widget-actions        åº•éƒ¨æŒ‰éˆ•åˆ—
   .widget-action         æ³›ç”¨æŒ‰éˆ•æ¨£å¼
   .widget-close/reset    å€‹åˆ¥æŒ‰éˆ•é¡è‰²
   .card-inputs           6 æ¬„è¼¸å…¥æ ¼ç¶²æ ¼
   .card-input            å–®ä¸€è¼¸å…¥æ ¼
   .results               çµæœå®¹å™¨
   .result-strip          ä¸‰æ¬„æ•¸å€¼å€ï¼ˆP/B/Tï¼‰
   .result-value          å–®ä¸€æ•¸å€¼ç›’
   .result-*.win-X        å‹æ–¹é«˜äº®ï¼ˆB/P/Tï¼‰
   ========================================================= */
.floating-widget {
  position: fixed; top: 100px; left: 100px; z-index: 9999;
  background: #2c2c2c; border: 1px solid #4a4a4a; border-radius: 10px;
  box-shadow: 0 4px 16px rgba(0,0,0,.55);
  display: none; width: auto; min-width: 300px; max-width: 380px; padding: 6px;
}
.widget-content { padding: 6px; display: flex; flex-direction: column; gap: 8px; color: #fff; }
.widget-actions { display: flex; gap: 6px; }
.widget-action {
  border: none; border-radius: 6px; padding: 6px 10px; font-size: 13px; font-weight: 600;
  cursor: pointer; color: #fff; background: #3c3c3c; transition: background-color .2s ease, color .2s ease;
}
.widget-close { background: #555; } .widget-close:hover { background: #6d6d6d; }
.widget-reset { background: #d9534f; flex: 1; } .widget-reset:hover { background: #c9302c; }

.widget-content .card-inputs { display: grid; grid-template-columns: repeat(6,44px); gap: 4px; justify-content: center; }
.widget-content .card-input {
  width: 44px; height: 32px; text-align: center; font-size: 16px; font-weight: 600; padding: 0; box-sizing: border-box;
  background: #343434; border: 1px solid #555; color: #fff; border-radius: 5px; transition: .2s;
}
.widget-content .card-input:focus { outline: none; border-color: #66aaff; box-shadow: 0 0 3px rgba(102,170,255,.4); }
.widget-content .card-input.disabled { background: #1f1f1f; border-color: #333; color: #666; pointer-events: none; }
.widget-content .card-input.highlight { border-color: #ffcc00; background: #4d462f; }

.widget-content .results { display: grid; gap: 6px; }
.widget-content .result-strip {
  display: grid; grid-template-columns: repeat(3,minmax(0,1fr)); gap: 6px; padding: 6px;
  background: #2f2f2f; border-radius: 8px;
}
.widget-content .result-value { font-size: 22px; font-weight: 700; text-align: center; padding: 6px 0; border-radius: 6px; background: #3f3f3f; color:#fff; }
.widget-content .result-player { color:#73b4ff; background:#2c3648; }
.widget-content .result-banker { color:#ff8673; background:#3f2930; }
.widget-content .result-outcome { color:#fff; }
.widget-content .result-value.win-B { background:#d9534f; color:#fff; }
.widget-content .result-value.win-P { background:#428bca; color:#fff; }
.widget-content .result-value.win-T { background:#5cb85c; color:#041904; }

/* =========================================================
   â‘¡ å…¨åŸŸèˆ‡ä¸»è¦å®¹å™¨
   ---------------------------------------------------------
   body            å…¨ç«™å­—é«”èˆ‡åº•è‰²
   .container      ä¸»è¦ç™½åº•å®¹å™¨
   ========================================================= */
body { font-family: 'Microsoft JhengHei', sans-serif; margin: 0; background: #f5f5f5; }
.container { width: 100%; margin: 0; background: #fff; padding: 20px; box-sizing: border-box; }

/* =========================================================
   â‘¢ åŠŸèƒ½å€èˆ‡æŒ‰éˆ•
   ---------------------------------------------------------
   .controls       åŠŸèƒ½æ®µè½æ¡†
   .controls h3    æ®µè½æ¨™é¡Œ
   .controls button ä¸€èˆ¬è—è‰²åŠŸèƒ½éˆ•
   .control-inline è¡Œå…§æ’åˆ—ï¼šæ¨™ç±¤ï¼‹æ§åˆ¶
   .quick-btn-group å¿«é€Ÿæ“ä½œæŒ‰éˆ•ç¾¤
   .rank-checkboxes ç­‰è·æ ¸å–æ–¹å¡Šç¾¤
   ========================================================= */
.controls { margin-bottom: 5px; padding: 15px; background: #f8f9fa; border-radius: 6px; }
.controls h3 { margin: 0 0 15px; padding-bottom: 10px; border-bottom: 1px solid #dee2e6; }

.controls button {
  padding: 10px 20px; margin-right: 10px; border: none; border-radius: 4px;
  background: #007bff; color: #fff; cursor: pointer;
}
.controls button:hover { background: #0056b3; }
.controls button:disabled { background: #ccc; cursor: not-allowed; }

.control-inline { display: flex; align-items: center; flex-wrap: wrap; gap: 10px; }
.control-inline label { margin-bottom: 0; font-weight: 600; }
.quick-btn-group, .rank-checkboxes { display: inline-flex; flex-wrap: wrap; gap: 6px; }

/* =========================================================
   â‘£ ç‰Œé´ç¶²æ ¼ï¼ˆç¸®åœ–ï¼‰
   ---------------------------------------------------------
   .mini-grid-wrapper   å¤–æ¡†ï¼ˆæ·±åº•ï¼‹åœ“è§’ï¼‰
   .grid-preview        15 æ¬„ç¶²æ ¼
   .cell                æ¯æ ¼é¡¯ç¤ºå¡èƒŒæˆ–ç¬¦è™Ÿ
   .tbox-*              T ç›’æ¡†ç·š
   .segment-*           å€æ®µé€æ˜åº¦
   ========================================================= */
.mini-grid-wrapper { margin: 12px 0; border: 1px solid #ced4da; border-radius: 10px; background: #0f1424; overflow: hidden; }
.grid-preview { display: grid; grid-template-columns: repeat(15,1fr); gap: 0; border-radius: 10px; overflow: hidden; }
.grid-preview.mini { max-height: none; overflow-y: visible; }
.grid-preview .cell {
  display: flex; align-items: center; justify-content: center; height: 20px;
  font-size: 14px; font-weight: 600; background: #0e1420; color: #e6eef8;
  border: 1px solid rgba(255,255,255,.05);
}
.grid-preview .cell.card-red { background-color: #f8d7da; color: #92000f; }
.grid-preview .cell.card-blue { background-color: #d4e9ff; color: #0b3c7e; }
.grid-preview .cell.signal-match { color: #ff4d4f; font-weight: 700; }
.grid-preview .cell.tbox-left   { border-left:   2px solid #ff4d4f; }
.grid-preview .cell.tbox-right  { border-right:  2px solid #ff4d4f; }
.grid-preview .cell.tbox-top    { border-top:    2px solid #ff4d4f; }
.grid-preview .cell.tbox-bottom { border-bottom: 2px solid #ff4d4f; }
.grid-preview .cell.segment-b { opacity: .9; }
.grid-preview .cell.segment-c { opacity: .7; }
.grid-placeholder { text-align: center; padding: 20px; font-size: 13px; color: #adb5bd; }

/* =========================================================
   â‘¤ å±€æ•¸çµ±è¨ˆå¡ï¼ˆç´”è³‡è¨Šå¡ï¼‰
   ---------------------------------------------------------
   .stats        è‡ªé©æ‡‰æ ¼ç·šå®¹å™¨
   .stat-card    å–®å¼µçµ±è¨ˆå¡ï¼šæ¨™ç±¤ï¼‹æ•¸å­—
   ========================================================= */
.stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, max-content)); gap: 10px; }
.stat-card {
  padding: 6px 10px; background: #e9ecef; border-radius: 6px;
  display: inline-flex; align-items: center; justify-content: center; gap: 8px; min-width: 80px;
}
.stat-card h3 { margin: 0 0 6px; color: #495057; font-size: 14px; border: none; flex: 1; text-align: center; }
.stat-card .value { font-size: 18px; font-weight: 700; color: #28a745; text-align: right; }

/* =========================================================
   â‘¥ çµæœè¡¨æ ¼ï¼ˆå¤–è§€ã€å°é½Šã€æ”¾å¤§æ¨¡å¼ï¼‰
   ---------------------------------------------------------
   .rounds-table        è¡¨æ ¼å®¹å™¨ï¼ˆåœ“è§’ï¼‹é™°å½±ï¼‰
   th/td                å…±åŒå„²å­˜æ ¼æ¨£å¼
   .cards-column        å¡ç‰Œæ¬„ï¼šé å·¦ï¼‹é¡å¤–å…§è·
   .hand-card-cell      å–®å¼µæ‰‹ç‰Œæ¬„ï¼šç­‰å¯¬å­—é«”ï¼‹ç·Šæ¹Šæ’ç‰ˆ
   .hand-point-cell     é»æ•¸æ¬„ï¼šè—è‰²å¼·èª¿
   body.table-zoom      æ”¾å¤§æª¢è¦–æ¨¡å¼
   ========================================================= */
.rounds-table {
  width: 100%; border-collapse: separate; border-spacing: 2px; margin-top: 10px;
  background: #f4f6f8; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,.1);
}
.rounds-table th,
.rounds-table td {
    border: 1px solid #e2e6ea;                 /* ç¶­æŒåŸæœ‰ç´°é‚Šæ¡† */
    padding: 8px;                               /* ç¶­æŒåŸå…§è· */
    text-align: center;                         /* ç¶­æŒç½®ä¸­ */
    /* æ”¹æˆæ¼¸å±¤åº•ï¼‹ä¸Šä¸‹å„ä¸€å±¤å…§é™°å½±ï¼Œèˆ‡å¡è‰²/å¡ç±¤é¢¨æ ¼ä¸€è‡´ */
    background: linear-gradient(180deg, #ffffff 0%, #f7f9fc 100%);  /* é ‚éƒ¨è¼ƒäº®ã€åº•éƒ¨è¼ƒæš— */
    box-shadow:
      inset 0 -3px 0 rgba(0, 0, 0, 0.12),       /* åº•é‚Šå…§é™°å½±ï¼ŒåŠ æ·±ç«‹é«”æ„Ÿ */
      inset 0  2px 0 rgba(255, 255, 255, 0.65); /* é ‚é‚Šå…§é«˜å…‰ï¼Œåšå‡ºæ‰“å…‰æ•ˆæœ */
    transition: all 0.2s ease;
    border-radius: 5px;
}

.rounds-table th {
  font-weight: 600; padding: 12px 8px; color: #fff;
  background: linear-gradient(145deg,#5a6c7d 0%,#4a5568 100%); text-transform: uppercase; letter-spacing: .8px;
  box-shadow: inset 0 -3px 0 rgba(0,0,0,.25), 0 2px 6px rgba(0,0,0,.15); border: 1px solid #2d3748;
}
.rounds-table tr:hover td {
    /* æ‡¸åœæ™‚ä¹Ÿç”¨æ¼¸å±¤åº•ï¼Œä¸¦åŠ é‡ä¸Šä¸‹çš„å…§é™°å½±èˆ‡é«˜å…‰ */
    background: linear-gradient(180deg, #f4f8fc 0%, #eaf2f9 100%);
    box-shadow:
      inset 0 -4px 0 rgba(0, 0, 0, 0.18),       /* åº•é‚Šå…§é™°å½±å†æ·±ä¸€é» */
      inset 0  2px 0 rgba(255, 255, 255, 0.70); /* é ‚é‚Šå…§é«˜å…‰å†äº®ä¸€é» */
    transform: translateY(-1px);
}


.rounds-table th.cards-column,
.rounds-table td.cards-column { text-align: left; padding-left: 12px; }  /* åˆä½µå¾Œï¼šå¡ç‰Œæ¬„çµ±ä¸€é å·¦ï¼‹å…§è· */

.rounds-table td.hand-card-cell {                                   /* åˆä½µå¾Œï¼šå–®å¼µæ‰‹ç‰Œæ¬„ä¹Ÿé å·¦ä¸”ä¿ç•™åŸå­—å‹è¨­å®š */
  text-align: left; font-family: 'JetBrains Mono','Noto Sans',monospace;
  white-space: nowrap; padding-left: 6px;
}

.rounds-table td.hand-point-cell { font-weight: 600; color: #0d6efd; }

/* æ”¾å¤§æ¨¡å¼ï¼šæ•´é«”å­—ç´šå‡ç´šä¸¦å›ºå®šç¸®æ”¾åŸé» */
body.table-zoom .rounds-table { font-size: 18px; transform-origin: top left; }
body.table-zoom .rounds-table th,
body.table-zoom .rounds-table td { padding: 6px 8px; } /* æ”¾å¤§æ™‚ç¸®å° paddingï¼Œé¿å…è¡¨æ ¼çˆ†å¯¬ */
body.table-zoom .card-label { transform: scale(1.1); } /* å…¶ä»–æ¬„ä½ç¶­æŒåŸæœ¬ 1.1 å€ */

/* æ”¾å¤§æ¨¡å¼å°ˆç”¨ï¼šå¡ç‰Œç±¤å°ºå¯¸èª¿æ•´ */
body.table-zoom td.cards-column .card-label {
  font-size: 30px;
  min-width: 44px;
  min-height: 34px;
  padding: 4px 8px;
  transform: scale(1.2);
}

/* æ”¾å¤§æ¨¡å¼å°ˆç”¨ï¼šå¡è‰²è‰²ç±¤ä¸€ä½µè®Šå¤§ */
body.table-zoom td.color-column .color-chip {
  width: 44px;
  height: 34px;
  font-size: 18px;
}

/* é¸å–ç‹€æ…‹é«˜äº®ï¼šç¬¬ä¸€é¸æ“‡=é‡‘è‰²ã€ç¬¬äºŒé¸æ“‡=è—è‰² */
.rounds-table .card-label.selected-first {
  outline: 2px solid #45eead;
  box-shadow: 0 0 8px rgba(255, 206, 61, 0.6);
  border-radius: 6px;
}
.rounds-table .card-label.selected-second {
  outline: 2px solid #69c0ff;
  box-shadow: 0 0 8px rgba(105, 192, 255, 0.6);
  border-radius: 6px;
}
.rounds-table tr.selected-first td {
  background: linear-gradient(180deg,#fff8e1 0%,#ffe58f 100%);
  box-shadow: inset 0 -3px 0 rgba(255,193,7,0.4);
}
.rounds-table tr.selected-second td {
  background: linear-gradient(180deg,#e6f7ff 0%,#bae7ff 100%);
  box-shadow: inset 0 -3px 0 rgba(24,144,255,0.35);
}

/* =========================================================
   â‘¦ è¡¨æ ¼å…§å°å…ƒä»¶ï¼šå¡è‰²ã€å¡ç‰Œç±¤ã€æ‰‹ç‰Œé»æ•¸ç±¤
   ---------------------------------------------------------
   .color-chips/.color-chip   å¡èƒŒè‰²å¡Šï¼ˆç´…/è—/æœªçŸ¥ï¼‰
   .card-label                å–®å¼µå¡ç‰Œç±¤ï¼ˆå¯é»é¸ï¼‰
   .card-strip                ä¸€åˆ—å¡ç‰Œç±¤å®¹å™¨
   .hand-chip(-.empty)        æ‰‹ç‰Œé»æ•¸ç±¤
   ========================================================= */
.color-chips { display: inline-flex; gap: 4px; align-items: center; }
/* å¡è‰²ç±¤å­—é«”èˆ‡å°ºå¯¸ï¼ˆè¦æ”¹å¡è‰²å¤§å°åœ¨æ­¤èª¿æ•´ï¼‰ */
.color-chip {
  display: inline-flex; width: 36px; height: 32px; border-radius: 8px;
  align-items: center; justify-content: center; font-size: 16px; font-weight: 700; color: #fff;
  box-shadow: inset 0 -3px 0 rgba(0,0,0,.2); border: 1px solid rgba(0,0,0,.08);
}
.color-chip.red { background: linear-gradient(145deg,#f45b69 0%,#d7263d 100%); }
.color-chip.blue { background: linear-gradient(145deg,#4da3ff 0%,#1e62d0 100%); }
.color-chip.unknown { background: linear-gradient(145deg,#dfe3eb 0%,#c8ceda 100%); color: #4a4f63; }

/* å¡ç‰Œç±¤å­—é«”èˆ‡å°ºå¯¸ï¼ˆè¦èª¿æ•´å¡ç‰Œæ¬„å­—ç´šä¿®æ”¹é€™è£¡ï¼‰ */
.card-label {
  display: inline-flex; align-items: center; justify-content: center;
  margin: 0 2px 2px 0; padding: 3px 5px; min-width: 36px; min-height: 30px;
  border-radius: 6px; background: #e7edf7; color: #233043; font-size: 16px; font-weight: 600;
  box-shadow: inset 0 -2px 0 rgba(0,0,0,.08); transition: transform .1s ease, box-shadow .1s ease; cursor: pointer;
}
.rounds-table td.cards-column { min-width: 220px; } /* å¡ç‰Œæ¬„ç¶­æŒå›ºå®šå¯¬åº¦ï¼Œé¿å…è¢«å¾Œé¢æ¬„ä½æ“ å£“ */
/* å¡ç‰Œåˆ—ç¶­æŒå–®è¡Œæ’åˆ—ï¼Œéœ€è¦æ™‚å¯ä»¥æ©«å‘æ²å‹• */
.rounds-table td.cards-column .card-strip {
  display: flex;
  flex-wrap: nowrap;
  gap: 4px;
  justify-content: flex-start;
  overflow-x: auto;
  padding-bottom: 2px;
}
.rounds-table td.color-column { min-width: 160px; } /* å¡è‰²æ¬„å¯¬åº¦ç•¥å°å³å¯ */
/* å¡è‰²åˆ—ä¹Ÿé–å®šå–®è¡Œï¼Œéå¤šè‰²å¡Šæ™‚æä¾›æ°´å¹³æ²å‹• */
.rounds-table td.color-column .color-chips {
  display: inline-flex;
  flex-wrap: nowrap;
  overflow-x: auto;
  padding-bottom: 2px;
  gap: 4px;
}
.card-label.s-signal-card { color: #c62828; font-weight: 600; }
.card-label.non-s-signal-card { color: #8ca1b4; }
.card-back-blue { background: #d4e9ff !important; }
.card-back-red  { background: #f8d7da !important; }
.card-back-unknown { background: #dee2e6; }

.hand-chip-strip { display: flex; gap: 4px; flex-wrap: wrap; justify-content: flex-start; }
.hand-chip {
  display: inline-flex; align-items: center; justify-content: center;
  min-width: 32px; min-height: 28px; border-radius: 6px; padding: 2px 4px;
  font-size: 14px; font-weight: 600; color: #233043; background: #dde4f2; box-shadow: inset 0 -2px 0 rgba(0,0,0,.08);
  cursor: pointer;
}
.hand-chip.empty { background: transparent; box-shadow: none; color: #a0a8bf; cursor: default; }

/* =========================================================
   â‘§ ç‰¹æ®Šè¡Œé«˜äº®ï¼ˆå…©å°ã€è¨Šè™Ÿè¡Œï¼‰
   --------------------------------------------------------- */
.two-pairs-round { background: #dfeeff !important; box-shadow: inset 8px 0 0 rgba(30,98,208,.35); }
.rounds-table tr.two-pairs-round td { background: #e8f3ff; }
.rounds-table tr.two-pairs-round.s-signal-round td.cards-column { background: #fff6d6; }
.rounds-table tr.s-signal-round td.cards-column { background: #fff9dd; }
.red-zero { color: #92000f; font-weight: 700; }  /* ç´”æ–‡å­—æ¨™è¨˜ã€Œç´… 0ã€æ™‚å¯ç”¨ */
.zero-card { background: #d4edda; }              /* å‚™ç”¨åº•è‰² */

/* =========================================================
   â‘¨ æ—¥èªŒã€å·¥å…·åˆ—èˆ‡å¿«æ·éµèªªæ˜
   --------------------------------------------------------- */
.results-split { display: flex; flex-wrap: wrap; gap: 20px; align-items: stretch; }
.log {
  background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 6px; padding: 16px;
  min-height: 420px; max-height: 80vh; overflow-y: auto; font-family: monospace; font-size: 13px; line-height: 1.45;
}
.log .success { color: #28a745; } .log .error { color: #dc3545; } .log .info { color: #17a2b8; }

.back-to-main {
  position: fixed; top: 20px; right: 20px; left: auto; width: 48px; height: 48px; z-index: 9999;
  border-radius: 12px; border: 2px solid rgba(255,255,255,.2); background: linear-gradient(135deg,#f093fb 0%,#f5576c 100%);
  color: #fff; font-size: 24px; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,.3); transition: .3s;
}
.back-to-main:hover { transform: translateY(-2px) scale(1.05); box-shadow: 0 6px 20px rgba(245,87,108,.4); }

.panel-dark { background: #f4f6fb; color: #1f2538; border-radius: 12px; box-shadow: 0 10px 25px rgba(15,23,42,.08); padding: 16px 20px; margin-bottom: 5px; }
.edit-toolbar { display: flex; align-items: center; justify-content: space-between; gap: 20px; flex-wrap: nowrap; margin-bottom: 12px; width: 100%; }
.edit-buttons { display: flex; align-items: center; gap: 10px; flex-wrap: nowrap; }
.edit-buttons .btn {
  padding: 8px 18px; border-radius: 8px; border: none; font-size: 15px; cursor: pointer;
  transition: transform .15s ease, box-shadow .15s ease, opacity .15s ease; background: #2f3b63; color: #f5f7ff;
}
.edit-buttons .btn:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 6px 14px rgba(0,0,0,.2); }
.edit-buttons .btn:disabled { opacity: .4; cursor: not-allowed; }
.edit-buttons .btn.secondary { background: #d7deed; color: #2b3248; }
.edit-buttons .btn.primary   { background: linear-gradient(135deg,#2ed573 0%,#1dd1a1 100%); color: #0b1f16; font-weight: 600; }
.edit-buttons .btn.alert     { background: rgba(245,61,86,.2); color: #d7263d; }
.edit-buttons .btn.active    { box-shadow: 0 0 0 2px rgba(46,213,115,.45), 0 6px 16px rgba(0,0,0,.18); transform: translateY(-1px); }
.tool-buttons { display: flex; align-items: center; gap: 16px; flex-wrap: nowrap; }
.tool-actions { display: inline-flex; align-items: center; gap: 10px; margin-left: 12px; }
.cut-controls { display: inline-flex; align-items: center; gap: 10px; margin-left: auto; }
.cut-controls .btn { padding: 8px 18px; border-radius: 8px; border: none; font-size: 15px; cursor: pointer; transition: transform .15s, box-shadow .15s, opacity .15s; background: rgba(255,255,255,.08); color: #f5f7ff; }
.cut-controls .btn:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 6px 14px rgba(0,0,0,.25); }

.input-inline { display: inline-flex; align-items: center; background: rgba(255,255,255,.08); padding: 6px 10px; border-radius: 6px; color: #cdd6f4; }
.input-inline input { background: transparent; border: none; outline: none; width: 80px; color: #fff; font-size: 15px; margin-left: 8px; text-align: right; }

.hotkey-info { display: flex; flex-wrap: wrap; gap: 8px 14px; padding: 12px 14px; border-radius: 10px; background: #fff; font-size: 13px; line-height: 1.4; color: #2d344c; box-shadow: inset 0 0 0 1px rgba(15,23,42,.08); }
.hotkey-info .hotkey-item { display: flex; align-items: center; gap: 6px; color: #434f6c; }
.hotkey-info .hotkey-key { display: inline-flex; align-items: center; justify-content: center; padding: 2px 8px; border-radius: 5px; background: #eef1f7; color: #1f2538; font-family: "JetBrains Mono", monospace; font-size: 12px; box-shadow: inset 0 0 0 1px rgba(15,23,42,.08); }

/* å°è¢å¹•ä½ˆå±€èª¿æ•´ */
@media (max-width: 900px) {
  .left-pane, .right-pane { flex: 1 1 100%; }
  .log { min-height: 300px; max-height: none; }
}

/* =========================================================
   â‘© èŠ±è‰²ï¼‹æ•¸å­—é¸æ“‡å™¨ï¼ˆåŒä¸€è¡Œï¼‰
   ---------------------------------------------------------
   .selection-container  æ•´é«”å¤–æ¡†ï¼ˆæ·ºç°åº•ï¼‹é™°å½±ï¼‰
   .quick-actions        ä¸Šæ–¹å¿«é€ŸæŒ‰éˆ•åˆ—
   .primary-actions      æ¨™é¡Œï¼‹ä¸»æŒ‰éˆ•åˆ—
   .quick-btn            å°å‹ç°è‰²æŒ‰éˆ•
   .selectors-row        èŠ±è‰²èˆ‡æ•¸å­—çš„å®¹å™¨ï¼ˆå¯æ›è¡Œï¼‰
   .separator            å‚ç›´åˆ†éš”ç·š
   .suit-selector/.suit-button èŠ±è‰²åœ“éˆ•ï¼ˆå››ç¨®ï¼‰
   .rank-selector/.rank-button æ•¸å­—æ–¹éˆ•ï¼ˆå« 0 é»çµ„åˆï¼‰
   ========================================================= */
.selection-container { background: #f8f9fa; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,.08); }
.quick-actions { display: flex; justify-content: flex-start; align-items: center; gap: 24px; margin-bottom: 15px; flex-wrap: wrap; }
.primary-actions { display: flex; align-items: center; flex-wrap: wrap; gap: 10px; }
.primary-actions strong { font-size: 16px; color: #333; white-space: nowrap; }

.quick-btn {
  padding: 6px 12px; background: #6c757d; color: #fff; border: none; border-radius: 6px; cursor: pointer;
  font-size: 13px; font-weight: 500; transition: .2s; box-shadow: 0 2px 4px rgba(0,0,0,.1);
}
.quick-btn:hover { background: #5a6268; transform: translateY(-1px); box-shadow: 0 4px 8px rgba(0,0,0,.15); }
.quick-btn:active { transform: translateY(0); }

.selectors-row { display: flex; align-items: center; gap: 20px; flex-wrap: wrap; padding: 15px 0; }
.separator { width: 2px; height: 60px; background: linear-gradient(to bottom,transparent,#dee2e6,transparent); margin: 0 10px; }

.suit-selector { display: flex; gap: 12px; align-items: center; }
.suit-button {
  font-family: Georgia, Verdana, sans-serif; font-size: 55px; font-weight: 700;
  height: 65px; width: 65px; border-radius: 50%; border: 1px solid transparent;  /* ç¢ºä¿æœ‰ 1pxï¼Œé¿å…ç€è¦½å™¨å¿½ç•¥ */
  background: #fff; box-shadow: 0 4px 12px rgba(0,0,0,.15);
  display: flex; align-items: center; justify-content: center; cursor: pointer; position: relative; overflow: hidden;
  transition: all .3s cubic-bezier(.68,-.55,.265,1.55);
}
.suit-button.é»‘æ¡ƒ { color:#005CAF; border-color:#005CAF; background:#d0ebee; }
.suit-button.æ„›å¿ƒ { color:#E83015; border-color:#E83015; background:#f7bdb4; }
.suit-button.æ–¹å¡Š { color:#FFB11B; border-color:#E98B2A; background:#faefd9; }
.suit-button.æ¢…èŠ± { color:#1B813E; border-color:#4A593D; background:#A8D8B9; }
.suit-button:hover { transform: scale(1.1) rotate(5deg); box-shadow: 0 8px 20px rgba(0,0,0,.25); }
.suit-button.selected { color:#fff !important; border-width: 3px; transform: scale(1.15); animation: selectBounce .5s cubic-bezier(.68,-.55,.265,1.55); }
.suit-button.é»‘æ¡ƒ.selected { background: linear-gradient(135deg,#113285 0%,#1a4db8 100%); border-color:#005CAF; color:#d0ebee; box-shadow: 0 0 20px rgba(17,50,133,.6), 0 8px 25px rgba(0,0,0,.3); }
.suit-button.æ„›å¿ƒ.selected { background: linear-gradient(135deg,#E83015 0%,#ff5a3d 100%); border-color:#E83015; color:#f7bdb4; box-shadow: 0 0 20px rgba(232,48,21,.6), 0 8px 25px rgba(0,0,0,.3); }
.suit-button.æ–¹å¡Š.selected { background: linear-gradient(135deg,#E98B2A 0%,#ffad52 100%); border-color:#FFB11B; color:#faefd9; box-shadow: 0 0 20px rgba(233,139,42,.6), 0 8px 25px rgba(0,0,0,.3); }
.suit-button.æ¢…èŠ±.selected { background: linear-gradient(135deg,#4A593D 0%,#627a52 100%); border-color:#1B813E; color:#A8D8B9; box-shadow: 0 0 20px rgba(74,89,61,.6), 0 8px 25px rgba(0,0,0,.3); }
.suit-button:active { transform: scale(1.05); }

.rank-selector { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }
.rank-button {
  font-family: 'Arial Black', sans-serif; font-size: 18px; font-weight: 700;
  height: 50px; width: 50px; border-radius: 10px; border: 3px solid #007bff; background: #fff; color: #007bff;
  box-shadow: 0 3px 10px rgba(0,123,255,.2);
  display: flex; align-items: center; justify-content: center; cursor: pointer; position: relative; overflow: hidden;
  transition: all .3s cubic-bezier(.68,-.55,.265,1.55);
}
.rank-button:hover { transform: translateY(-3px) scale(1.05); box-shadow: 0 6px 20px rgba(0,123,255,.4); border-color: #0056b3; }
.rank-button.selected {
  background: linear-gradient(135deg,#007bff 0%,#0056b3 100%); color: #fff; border-color: #004085; transform: scale(1.1);
  box-shadow: 0 0 20px rgba(0,123,255,.8), 0 0 40px rgba(0,123,255,.4), 0 8px 25px rgba(0,0,0,.3);
  animation: selectBounce .5s cubic-bezier(.68,-.55,.265,1.55), pulse 2s ease-in-out infinite;
}
.rank-button.selected:hover { box-shadow: 0 0 30px rgba(0,123,255,1), 0 0 50px rgba(0,123,255,.6), 0 10px 30px rgba(0,0,0,.4); }
.rank-button:active { transform: scale(1.02); }

/* 0 é»ç‰Œç‰¹åˆ¥ç”¨ç¶ è‰²é‚Šæ¡†èˆ‡é«˜äº® */
.rank-button[data-value="10"],
.rank-button[data-value="J"],
.rank-button[data-value="Q"],
.rank-button[data-value="K"] { border-color: #28a745; color: #28a745; }
.rank-button[data-value="10"]:hover,
.rank-button[data-value="J"]:hover,
.rank-button[data-value="Q"]:hover,
.rank-button[data-value="K"]:hover { box-shadow: 0 6px 20px rgba(40,167,69,.4); }
.rank-button[data-value="10"].selected,
.rank-button[data-value="J"].selected,
.rank-button[data-value="Q"].selected,
.rank-button[data-value="K"].selected {
  background: linear-gradient(135deg,#28a745 0%,#1e7e34 100%); border-color: #155724;
  box-shadow: 0 0 20px rgba(40,167,69,.8), 0 0 40px rgba(40,167,69,.4), 0 8px 25px rgba(0,0,0,.3);
}

/* å‹•ç•« */
@keyframes selectBounce { 0%{transform:scale(1)} 50%{transform:scale(1.2)} 100%{transform:scale(1.15)} }
@keyframes pulse { 0%,100%{ box-shadow: 0 0 20px rgba(0,123,255,.6), 0 0 40px rgba(0,123,255,.4), 0 8px 25px rgba(0,0,0,.3)}
                   50%     { box-shadow: 0 0 30px rgba(0,123,255,.9), 0 0 60px rgba(0,123,255,.6), 0 8px 25px rgba(0,0,0,.3)} }

/* =========================================================
   â‘ª T å±€è¨Šè™Ÿï¼ˆè¡Œå…§çµ„ä»¶ï¼‰èˆ‡å–®é¸æ¨£å¼
   --------------------------------------------------------- */
.t-signal-inline { display: flex; align-items: center; gap: 8px; padding: 6px 12px; border-radius: 8px; background: #eef2ff; }
.radio-label { display: inline-flex; align-items: center; gap: 8px; cursor: pointer; font-weight: 500; color: #495057; transition: color .2s; }
.radio-label:hover { color: #007bff; }
.radio-label input[type="radio"] { width: 18px; height: 18px; cursor: pointer; }
.radio-label span { font-size: 15px; }

/* =========================================================
   â‘« å·¦å³æ¬„æ¯”ä¾‹èˆ‡å¿«æ·éµå€ï¼ˆã€ŒåŠŸèƒ½æ¢ï¼‹èªªæ˜ã€åŒåˆ—ï¼‰
   --------------------------------------------------------- */
.left-pane  { flex: 7 1 0; min-width: 0; display: flex; flex-direction: column; }  /* å·¦æ¬„ä½” 7 ä»½ */
.right-pane { flex: 3 1 0; min-width: 260px; max-width: none; }                    /* å³æ¬„ä½” 3 ä»½ */

.stats-hotkeys { display: flex; gap: 16px; align-items: center; margin-bottom: 16px; flex-wrap: nowrap; }
.stats-hotkeys .stats { flex: 1; min-width: 0; }                   /* å·¦å´çµ±è¨ˆå¡è‡ªé©æ‡‰å¯¬åº¦ */
.stats-hotkeys .hotkey-info { flex: none; width: auto; margin: 0; }/* å³å´å¿«æ·éµèªªæ˜å›ºå®šå¯¬åº¦ */

/* =========================================================
   â‘¬ çµæœæ¬„ Chipï¼ˆçµ±ä¸€é€™å¥—è¦–è¦ºï¼›é¿å…å’Œ td.result-* é¡è‰²é‡ç–Šï¼‰
   --------------------------------------------------------- */
.result-chip {                     /* åŸºæœ¬ chip å¤–è§€ï¼šä¸­ç­‰å…§è·ï¼‹ç™½å­—ï¼‹é™°å½± */
  display: inline-flex; align-items: center; justify-content: center;
  min-width: 32px; min-height: 28px; border-radius: 6px; padding: 4px 8px;
  font-size: 16px; font-weight: 700; color: #fff; border: 1px solid rgba(0,0,0,.1);
  box-shadow: inset 0 -2px 0 rgba(0,0,0,.15); transition: .2s;
}
.result-chip.banker { background: linear-gradient(145deg,#e53e3e 0%,#c53030 100%); text-shadow: 0 1px 2px rgba(0,0,0,.2); }
.result-chip.player { background: linear-gradient(145deg,#3182ce 0%,#2c5282 100%); text-shadow: 0 1px 2px rgba(0,0,0,.2); }
.result-chip.tie    { background: linear-gradient(145deg,#38a169 0%,#2f855a 100%); text-shadow: 0 1px 2px rgba(0,0,0,.2); }
.result-chip:hover  { transform: translateY(-1px); box-shadow: inset 0 -2px 0 rgba(0,0,0,.2), 0 2px 4px rgba(0,0,0,.1); }

/* çµæœ / å‰å¾Œæ¬„ä½é¡è‰² (ç”± JS æ›ä¸Š outcome-* é¡åˆ¥) */
.rounds-table td.result-cell,
.rounds-table td.compare-cell { padding: 6px; font-weight: 600; }
.rounds-table td.result-cell.outcome-banker,
.rounds-table td.compare-cell.outcome-banker {
  background: #fdecea;
  color: #b71c1c;
}
.rounds-table td.result-cell.outcome-player,
.rounds-table td.compare-cell.outcome-player {
  background: #e3f2fd;
  color: #0d47a1;
}
.rounds-table td.result-cell.outcome-tie,
.rounds-table td.compare-cell.outcome-tie {
  background: #e8f5e9;
  color: #1b5e20;
}

</style>

    <!-- Excel åŒ¯å‡ºå¥—ä»¶ -->
    <script src="https://cdn.jsdelivr.net/npm/exceljs/dist/exceljs.min.js"></script>
</head>
<body>
    <!-- =================================================================== -->
    <!-- === 3. é é¢ä¸»é«”å…§å®¹ (Body) === -->
    <!-- =================================================================== -->

    <!-- æ‡¸æµ®æŒ‰éˆ•ï¼šè¿”å›ä¸»é  -->
    <button class="back-to-main" id="backToMain" title="è¿”å›ä¸»é ">ğŸ </button>
    
    <!-- ä¸»è¦å…§å®¹å®¹å™¨ -->
    <div class="container">
        
        <!-- å€å¡Šä¸€ï¼šå‰µå»ºå€ -->
        <div class="controls">
            
            <!-- Så±€è¨Šè™Ÿè¨­å®š -->
            <div style="margin-bottom: 15px;">
                <div class="selection-container">
                    <!-- å¿«æ·æŒ‰éˆ•çµ„ -->
                    <div class="quick-actions">
                        <div class="quick-btn-group">
                            <button type="button" class="quick-btn" onclick="selectAllSuits()">å…¨é¸èŠ±è‰²</button>
                            <button type="button" class="quick-btn" onclick="clearAllSuits()">æ¸…ç©ºèŠ±è‰²</button>
                            <button type="button" class="quick-btn" onclick="selectAllRanks()">å…¨é¸æ•¸å­—</button>
                            <button type="button" class="quick-btn" onclick="clearAllRanks()">æ¸…ç©ºæ•¸å­—</button>
                            <button type="button" class="quick-btn" onclick="selectZeroRanks()">0é»ç‰Œ</button>
                        </div>
                        <div class="primary-actions">
                            <button id="generateBtn">GO!</button>
                            <button id="applyConfigBtn">æ‡‰ç”¨è¨­å®š</button>
                            <strong>è¨Šè™Ÿç‰Œå¼µæ•¸ï¼š<span id="signalCardCount" style="color: #28a745; font-size: 18px;">0</span> å¼µ</strong>
                        </div>
                    </div>
                    
                    <!-- èŠ±è‰²å’Œæ•¸å­—é¸æ“‡å™¨ -->
                    <div class="selectors-row">
                        <!-- èŠ±è‰²é¸æ“‡ï¼ˆåœ“å½¢æŒ‰éˆ•ï¼‰ -->
                        <div class="suit-selector">
                            <a class="suit-button é»‘æ¡ƒ" data-value="â™ ">â™ </a>
                            <a class="suit-button æ„›å¿ƒ" data-value="â™¥">â™¥</a>
                            <a class="suit-button æ–¹å¡Š" data-value="â™¦">â™¦</a>
                            <a class="suit-button æ¢…èŠ±" data-value="â™£">â™£</a>
                        </div>
                        
                        <!-- åˆ†éš”ç·š -->
                        <div class="separator"></div>
                        
                        <!-- æ•¸å­—é¸æ“‡ï¼ˆæ–¹å½¢æŒ‰éˆ•ï¼‰ -->
                        <div class="rank-selector">
                            <a class="rank-button" data-value="A">A</a>
                            <a class="rank-button" data-value="2">2</a>
                            <a class="rank-button" data-value="3">3</a>
                            <a class="rank-button" data-value="4">4</a>
                            <a class="rank-button" data-value="5">5</a>
                            <a class="rank-button" data-value="6">6</a>
                            <a class="rank-button" data-value="7">7</a>
                            <a class="rank-button" data-value="8">8</a>
                            <a class="rank-button" data-value="9">9</a>
                            <a class="rank-button" data-value="10">10</a>
                            <a class="rank-button" data-value="J">J</a>
                            <a class="rank-button" data-value="Q">Q</a>
                            <a class="rank-button" data-value="K">K</a>
                        </div>

                        <!-- Tå±€è¨Šè™Ÿï¼ˆå…©å°ï¼‰ -->
                        <div class="t-signal-inline">
                            <label class="radio-label">
                                <input type="radio" name="tSignalType" value="twoPairs" checked>
                                <span>å…©å°</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- éš±è—çš„ checkboxï¼ˆä¿æŒåŸåŠŸèƒ½ï¼‰ -->
                    <div class="rank-checkboxes" style="display: none;">
                        <label><input type="checkbox" value="A" class="rank-checkbox"> A</label>
                        <label><input type="checkbox" value="2" class="rank-checkbox"> 2</label>
                        <label><input type="checkbox" value="3" class="rank-checkbox"> 3</label>
                        <label><input type="checkbox" value="4" class="rank-checkbox"> 4</label>
                        <label><input type="checkbox" value="5" class="rank-checkbox"> 5</label>
                        <label><input type="checkbox" value="6" class="rank-checkbox"> 6</label>
                        <label><input type="checkbox" value="7" class="rank-checkbox"> 7</label>
                        <label><input type="checkbox" value="8" class="rank-checkbox"> 8</label>
                        <label><input type="checkbox" value="9" class="rank-checkbox"> 9</label>
                        <label><input type="checkbox" value="10" class="rank-checkbox"> 10</label>
                        <label><input type="checkbox" value="J" class="rank-checkbox"> J</label>
                        <label><input type="checkbox" value="Q" class="rank-checkbox"> Q</label>
                        <label><input type="checkbox" value="K" class="rank-checkbox"> K</label>
                    </div>
                    
                </div>
            </div>

        </div>

        <!-- å€å¡ŠäºŒï¼šç·¨è¼¯å€ -->
        <div class="panel-dark">
            <div class="edit-toolbar">
                <div class="edit-buttons">
                    <button class="btn" id="btnEdit" disabled>ç·¨è¼¯</button>
                    <button class="btn" id="btnSwap" disabled>ğŸ‚¡  â®‚  ğŸƒ‘</button>
                    <button class="btn" id="btnRound" disabled>å±€äº¤æ›</button>
                    <button class="btn" id="btnAutoColor" disabled>å¡è‰²</button>
                    <button class="btn secondary" id="btnCancelEdit" disabled>å–æ¶ˆ</button>
                    <button class="btn primary" id="btnApplyChanges" disabled>å¥—ç”¨</button>
                    <button class="btn alert" id="clearBtn">æ¸…ç©º</button>
                    <div class="tool-actions">
                        <button class="btn" id="btnExportCombined">å°å‡º</button>
                        <button class="btn" id="btnPreview">é è¦½</button>
                        <button class="btn" id="btnSpeech">èªéŸ³</button>
                        <button class="btn secondary" id="btnApplyTools">è¨ˆç®—å·¥å…·</button>
                    </div>
                </div>
                <div class="cut-controls">
                    <div class="input-inline">
                        <label for="cutPos">åˆ‡ç‰Œå¼µæ•¸</label>
                        <input id="cutPos" type="number" min="0" value="0">
                    </div>
                    <button class="btn" id="btnCut">åˆ‡ç‰Œ</button>
                </div>
            </div>
            <div class="stats-hotkeys">
                <div class="stats">
                    <div class="stat-card"><h3>å±€</h3><div class="value" id="totalRounds">0</div></div>
                    <div class="stat-card"><h3>èŠ</h3><div class="value" id="bankerCount">0</div></div>
                    <div class="stat-card"><h3>é–’</h3><div class="value" id="playerCount">0</div></div>
                    <div class="stat-card"><h3>å’Œ</h3><div class="value" id="tieCount">0</div></div>
                    <div class="stat-card"><h3>å…©å°</h3><div class="value" id="twoPairsCount">0</div></div>
                    <div class="stat-card"><h3>è¨Šè™Ÿ</h3><div class="value"><span id="sSignalCards">0</span>/<span id="tSignalCards">0</span></div></div>
                    
                </div>
                <div class="hotkey-info">
                    <div class="hotkey-item"><span class="hotkey-key">Z</span><span>ç·¨è¼¯</span></div>
                    <div class="hotkey-item"><span class="hotkey-key">X</span><span>å¡äº¤æ›</span></div>
                    <div class="hotkey-item"><span class="hotkey-key">K</span><span>å¡è‰²</span></div>
                <div class="hotkey-item"><span class="hotkey-key">A</span><span>å¥—ç”¨</span></div>
                <div class="hotkey-item"><span class="hotkey-key">G</span><span>å‰µå»º</span></div>
                <div class="hotkey-item"><span class="hotkey-key">V</span><span>é è¦½</span></div>
                <div class="hotkey-item"><span class="hotkey-key">Esc</span><span>å–æ¶ˆ</span></div>
                <div class="hotkey-item"><span class="hotkey-key">C</span><span>åˆ‡ç‰Œ</span></div>
                <div class="hotkey-item"><span class="hotkey-key">U</span><span>CSV å°å‡º</span></div>
                <div class="hotkey-item"><span class="hotkey-key">Ctrl+X</span><span>Excel åŒ¯å‡º</span></div>
                    <div class="hotkey-item"><span class="hotkey-key">Ctrl+P</span><span>åˆ—å°</span></div>
                    <div class="hotkey-item"><span class="hotkey-key">Tab</span><span>åˆ‡æ›ç„¦é»</span></div>
                    <div class="hotkey-item"><span class="hotkey-key">?</span><span>å¿«æ·éµæç¤º</span></div>
                </div>
            </div>
        </div>
        <!-- å€å¡Šå››ï¼‹äº”ï¼šå·¦è¡¨å³èªŒ -->
<div class="results-split">
  <div class="left-pane">
    <table class="rounds-table" id="roundsTable" style="display: none; margin-top: 0;">
      <thead id="roundsHead"></thead>
      <tbody id="roundsBody"></tbody>
    </table>
  </div>

  <div class="right-pane">
    <div class="log" id="logArea"></div>
    <div class="mini-grid-wrapper">
      <div class="grid-preview mini" id="statsGridPreview"><div class="grid-placeholder">å°šç„¡ç‰Œé´è³‡æ–™</div></div>
    </div>
    <div class="signal-summary" id="signalSummary"></div>
  </div>
</div>


    <!-- =================================================================== -->
    <!-- === 4. JavaScript è…³æœ¬å€ (Scripting) === -->
    <!-- =================================================================== -->

    <!-- è…³æœ¬ä¸€ï¼šè¿”å›ä¸»é æŒ‰éˆ•çš„åŠŸèƒ½ -->

    <script>
        document.getElementById('backToMain').addEventListener('click', () => {
            window.location.href = 'index.html'; // é»æ“Šå¾Œè·³è½‰åˆ° index.html
        });
    </script>

    <!-- è…³æœ¬äºŒï¼šèŠ±è‰²åœ“å½¢æŒ‰éˆ•èˆ‡èˆŠç‰ˆ checkbox ä¹‹é–“çš„æ©‹æ¥ç¨‹å¼ç¢¼ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- åˆå§‹åŒ–åœ“å½¢æŒ‰éˆ•çš„é»æ“Šäº‹ä»¶ï¼ˆèŠ±è‰²ï¼‰ ---
            const suitButtons = document.querySelectorAll('.suit-button');
            suitButtons.forEach(button => {
                button.addEventListener('click', (event) => {
                    event.preventDefault(); // é˜²æ­¢ <a> æ¨™ç±¤è·³è½‰
                    button.classList.toggle('selected'); // åˆ‡æ›é¸ä¸­/æœªé¸ä¸­ç‹€æ…‹
                    // æ¯æ¬¡é»æ“Šéƒ½è§¸ç™¼ä¸€æ¬¡å¼µæ•¸è¨ˆç®—
                    if (typeof window.updateSignalCardCount === 'function') {
                        window.updateSignalCardCount();
                    }
                });
            });
            
            // --- åˆå§‹åŒ–æ–¹å½¢æŒ‰éˆ•çš„é»æ“Šäº‹ä»¶ï¼ˆæ•¸å­—ï¼‰ ---
            const rankButtons = document.querySelectorAll('.rank-button');
            rankButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // åˆ‡æ›é¸ä¸­ç‹€æ…‹
                    this.classList.toggle('selected');
                    
                    // æ›´æ–°å°æ‡‰çš„ checkbox
                    const value = this.dataset.value;
                    const checkbox = document.querySelector(`.rank-checkbox[value="${value}"]`);
                    if (checkbox) {
                        checkbox.checked = this.classList.contains('selected');
                        // è§¸ç™¼ change äº‹ä»¶ä»¥æ›´æ–°è¨Šè™Ÿç‰Œå¼µæ•¸
                        checkbox.dispatchEvent(new Event('change', { bubbles: true }));
                    }
                });
            });
            
            // --- åŒæ­¥ checkbox ç‹€æ…‹åˆ°æ•¸å­—æŒ‰éˆ• ---
            const syncRankButtons = function() {
                const checkboxes = document.querySelectorAll('.rank-checkbox');
                checkboxes.forEach(checkbox => {
                    const value = checkbox.value;
                    const button = document.querySelector(`.rank-button[data-value="${value}"]`);
                    if (button) {
                        if (checkbox.checked) {
                            button.classList.add('selected');
                        } else {
                            button.classList.remove('selected');
                        }
                    }
                });
            };
            
            // ç›£è½ checkbox è®ŠåŒ–ï¼ˆçµ¦å¿«æ·æŒ‰éˆ•ç”¨ï¼‰
            const checkboxes = document.querySelectorAll('.rank-checkbox');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', syncRankButtons);
            });

            // --- è®“èˆŠçš„å¿«é€Ÿé¸æ“‡å‡½å¼ä¹Ÿèƒ½æ“ä½œæ–°çš„åœ“å½¢æŒ‰éˆ• ---
            window.selectAllSuits = function() {
                suitButtons.forEach(btn => btn.classList.add('selected'));
                if (typeof window.updateSignalCardCount === 'function') { window.updateSignalCardCount(); }
            }
            window.clearAllSuits = function() {
                suitButtons.forEach(btn => btn.classList.remove('selected'));
                if (typeof window.updateSignalCardCount === 'function') { window.updateSignalCardCount(); }
            }
            window.selectRedSuits = function() {
                suitButtons.forEach(btn => {
                    const value = btn.dataset.value;
                    if (value === 'â™¥' || value === 'â™¦') {
                        btn.classList.add('selected');
                    } else {
                        btn.classList.remove('selected');
                    }
                });
                if (typeof window.updateSignalCardCount === 'function') { window.updateSignalCardCount(); }
            }

            // --- æ ¸å¿ƒæ©‹æ¥ï¼šè®“ signals.js èƒ½è®€å–åˆ°åœ“å½¢æŒ‰éˆ•çš„é¸æ“‡çµæœ ---
            function getSelectedSuitsFromButtons() {
                const selectedButtons = document.querySelectorAll('.suit-button.selected');
                return Array.from(selectedButtons).map(btn => btn.dataset.value);
            }

            // --- è¦†å¯«èˆŠçš„å‡½å¼ï¼Œè®“å®ƒå€‘ä½¿ç”¨æ–°çš„è®€å–æ–¹å¼ ---
            if (typeof window.updateSignalCardCount === 'function') {
                const originalUpdate = window.updateSignalCardCount; // ä¿ç•™åŸå§‹å‡½å¼ä»¥å‚™ä¸æ™‚ä¹‹éœ€
                window.updateSignalCardCount = function() {
                    const suits = getSelectedSuitsFromButtons(); // å¾åœ“å½¢æŒ‰éˆ•è®€å–
                    const ranks = Array.from(document.querySelectorAll('.rank-checkbox:checked')).map(cb => cb.value);
                    const totalCards = suits.length * ranks.length * 8;
                    const countElement = document.getElementById('signalCardCount');
                    if (countElement) {
                        countElement.textContent = totalCards;
                        if (totalCards === 0) countElement.style.color = '#dc3545';
                        else if (totalCards <= 64) countElement.style.color = '#28a745';
                        else if (totalCards <= 128) countElement.style.color = '#ffc107';
                        else countElement.style.color = '#fd7e14';
                    }
                }
            }
            if (typeof window.applySignalConfig === 'function') {
                const originalApply = window.applySignalConfig; // ä¿ç•™åŸå§‹å‡½å¼
                window.applySignalConfig = function() {
                    const suits = getSelectedSuitsFromButtons(); // å¾åœ“å½¢æŒ‰éˆ•è®€å–
                    const ranks = Array.from(document.querySelectorAll('.rank-checkbox:checked')).map(cb => cb.value);
                    
                    // æ›´æ–°åˆ° signals.js çš„æ ¸å¿ƒé‚è¼¯ä¸­
                    if (window.RedZeroLogic && typeof window.RedZeroLogic.updateSignalConfig === 'function') {
                         window.RedZeroLogic.updateSignalConfig({ suits, ranks });
                    } else if (typeof SIGNAL_CONFIG !== 'undefined') { // å‚™ç”¨æ–¹æ¡ˆ
                        SIGNAL_CONFIG.suits = suits;
                        SIGNAL_CONFIG.ranks = ranks;
                    }
                    
                    // å¯«å…¥æ—¥èªŒ
                    log(`è¨Šè™Ÿè¨­å®šå·²æ›´æ–°ï¼šèŠ±è‰²[${suits.join(',')}] æ•¸å­—[${ranks.join(',')}]`, 'success');
                    log(`é è¨ˆè¨Šè™Ÿç‰Œç¸½æ•¸ï¼š${suits.length * ranks.length * 8}å¼µ`, 'info');
                }
            }

            // --- é é¢è¼‰å…¥æ™‚ï¼Œä¾ç…§å·²ä¿å­˜è¨­å®šåŒæ­¥ UI ---
            if (typeof window.syncSignalUiFromConfig === 'function') {
                window.syncSignalUiFromConfig();
            } else if (window.RedZeroLogic && typeof window.RedZeroLogic.syncSignalUiFromConfig === 'function') {
                window.RedZeroLogic.syncSignalUiFromConfig();
            }
            if (typeof window.updateSignalCardCount === 'function') window.updateSignalCardCount();
        });
    </script>

    <!-- è…³æœ¬ä¸‰ï¼šå¼•ç”¨æ‹†åˆ†å¾Œçš„æ ¸å¿ƒé‚è¼¯æª”æ¡ˆèˆ‡ UI æª”æ¡ˆ -->
    <!-- å…ˆè¼‰å…¥æ ¸å¿ƒé‚è¼¯å†è¼‰å…¥ UIï¼Œä»¥ç¢ºä¿åº•å±¤é¡åˆ¥å’Œæ¨¡æ“¬å™¨å·²å®šç¾© -->
    <script src="signals.js"></script>
    <script src="signals_ui.js"></script>
</body>
</html>
